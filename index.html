<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tom Lisi - Reporter</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="header">
        <div class="header-left">
            <h1>Tom Lisi</h1>
        </div>
        
        <div class="header-right">
            <h2>Reporter | Journalist</h2> 
            <h3><a href="#contact-link">Email me</a></h3>
        </div>
    </div>
    
    <div class="news-header">
        <h1>Some Clips from 2024</h1>
    </div>
    
    <div class="news-container">
        </div>

    <div class="rss">
        <h1>My Latest Work at&nbsp;<a href="https://lancasteronline.com/" target="_blank" rel="noopener noreferrer">LNP | LancasterOnline</a></h1>
        <div id="rss-feed" class="rss-feed">Loading feed...</div>
        
        <script>
            async function fetchRSSFromGitHub() {
                const githubRawUrl = "https://raw.githubusercontent.com/tommylisi/web/main/tom_lisi_feed.xml";
        
                try {
                    const response = await fetch(githubRawUrl);
                    if (!response.ok) throw new Error("Network response was not ok");
                    
                    const text = await response.text();
                    const parser = new DOMParser();
                    const xml = parser.parseFromString(text, "text/xml");
        
                    const items = xml.querySelectorAll("item");
                    let html = "";
        
                    items.forEach((item, index) => {
                        if (index < 5) { // Limit to 5 articles
                            const title = item.querySelector("title").textContent;
                            const link = item.querySelector("link").textContent;
                            const description = item.querySelector("description").textContent;
                            const pubDate = new Date(item.querySelector("pubDate").textContent).toDateString();
                            
                            // FIX: Simplify image selection to rely on the <enclosure> tag
                            const enclosure = item.querySelector("enclosure");
                            const imageUrl = enclosure 
                                ? enclosure.getAttribute("url") 
                                : "default-image.jpg"; // Fallback image
        
                            html += `
                                <div class="rss-item">
                                    <img src="${imageUrl}" alt="${title}" class="rss-image" style="width:100%; border-radius: 8px;">
                                    <h2 class="rss-title"><a href="${link}" target="_blank">${title}</a></h2>
                                    <p class="rss-description">${description}</p>
                                    <span class="rss-date">${pubDate}</span>
                                </div>
                            `;
                        }
                    });
        
                    document.getElementById("rss-feed").innerHTML = html;
                } catch (error) {
                    console.error("Error fetching RSS feed:", error);
                    document.getElementById("rss-feed").innerHTML = "Failed to load feed.";
                }
            }
        
            fetchRSSFromGitHub();
            // Using 60000ms (1 minute) is very aggressive for a static site. 
            // Consider increasing this to 300000 (5 minutes) or 3600000 (1 hour).
            setInterval(fetchRSSFromGitHub, 300000); 
        </script>
    </div>
    
    <div class="contact-form" id="contact-link">
        <h2>Contact Me</h2>
        </div>
    
    <div class="footer">
        <p>Copyright Â© 2025 Tom Lisi</p>
    </div>
</body>
</html>